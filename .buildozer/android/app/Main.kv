#:import os os
<MainMenuScreen>:
    orientation: 'vertical'
    Button:
        text: 'Get New Calibration Set'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release:
            app.targetReaderScreen = 'calib'
            app.writeDir = app.create_new_data_set()
            app.rawFile = app.writeDir + 'raw.csv'
            app.calibFile = app.writeDir + 'calib.txt'
            app.samplesFile = app.writeDir + 'samples.csv'
            app.calcLog = app.writeDir + 'calc_log.txt'
            app.goto_image_menu()
    Button:
        text: 'Load Old Calibration Set'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release:
            app.targetReaderScreen = 'sample'
            app.goto_get_old_calib()


<ImageMenuScreen>:
    orientation: 'vertical'
    Button:
        text: 'Take Photo'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release:
            if app.targetReaderScreen == 'calib':imageFile=app.take_photo(app.targetReaderScreen)
            else:imageFile=app.take_photo(app.targetReaderScreen, app.sampleScreen.ids['colorReader'].spots[0].sampleGrp)
    Button:
        text: 'Get Stock Image'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release: app.goto_get_stock_image()


<GraphScreen>:
    BoxLayout:
        size: root.size
        orientation: 'vertical'
        MyGraph:
            id: graph
        Button:
            id: analyer_btn
            size_hint_y: None
            height: root.height * 0.25
            text: 'Go to analyser'
            text_size: self.size
            font_size: '20sp'
            on_release:
                app.goto_calibration_screen()
                print R2.x
                print R2.y
                print R2.text_size
                print R2.height
                print R2.width
    Label:
        id: LSR
        x: root.width * 0.2
        y: root.height * 0.8
        width: root.width * 0.3
        height: root.height * 0.05
        text_size: self.size
        font_size: self.height * 0.7
    Label:
        id: R2
        x: root.width * 0.2
        y: root.height * 0.7
        width: root.width * 0.3
        height: root.height * 0.05
        text_size: self.size
        font_size: self.height * 0.7


<CalibChooserScreen>:
    BoxLayout:
        id: fileChooserScreen
        size: root.size
        orientation: 'vertical'
        FileChooserListView:
            id: calibChooser
            size_hint_y: 0.9
            path: '.'
        Button:
            id: selectButton
            size_hint_y: 0.1
            text: 'Load'
            on_release:
                app.calib = app.readCalibFile(calibChooser.selection[0])
                app.writeDir = os.path.dirname(calibChooser.selection[0]) + '/'
                app.rawFile = app.writeDir + 'raw.csv'
                app.calibFile = app.writeDir + 'calib.txt'
                app.samplesFile = app.writeDir + 'samples.csv' 
                app.goto_image_menu()
 
 
<FileChooserScreen>:
    BoxLayout:
        id: fileChooserScreen
        size: root.size
        orientation: 'vertical'
        FileChooserListView:
            id: fileChooser
            size_hint_y: 0.9
            path: '.'
        Button:
            id: selectButton
            size_hint_y: 0.1
            text: 'Load'
            on_release:
                print 'filechooser selection', fileChooser.selection[0]
                app.goto_color_reader_screen(fileChooser.selection[0])
 
 
<ColorReaderToggleButton@ToggleButton>:
    group: 'select'
    allow_no_currentSpot: False
    font_size: self.height * 0.35
    halign: 'center'
    valign: 'middle'
    markup: True


<MsgPopup>:
    size_hint: 0.7, 0.4
    title: "Attention"    
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 20

        Label:
            id: message_label
            size_hint_y: 0.4
            text: "Label"
        Button:
            text: 'Dismiss'
            size_hint_y: 0.4
            on_press: root.dismiss()
