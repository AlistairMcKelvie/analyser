#:import os os
#:import util util
#:import calc calc
<MainMenuScreen>:
    orientation: 'vertical'
    background_color: 1, 1, 1
    Button:
        font_size: '25dp'
        text: 'Settings'
        on_release: app.open_settings()
        background_normal: ''
        color: 0, 0, 0, 1
    Button:
        text: 'Get New Calibration Set'
        text_size: self.size
        font_size: '25dp'
        halign: 'center'
        valign: 'middle'
        on_release:
            app.targetReaderScreen = 'calib'
            app.writeDir = app.createDataSet()
            app.logger = calc.CalcLogger('log', app.calcLog)
            app.goto_image_menu()
        background_normal: ''
        color: 0, 0, 0, 1
    Button:
        text: 'Load Old Calibration Set'
        text_size: self.size
        font_size: '25dp'
        halign: 'center'
        valign: 'middle'
        on_release:
            app.targetReaderScreen = 'sample'
            app.cleanUpDirs()
            app.screenManager.add(app.screens.calibChooser)
            app.screens.calibChooser.refresh()
        background_normal: ''
        color: 0, 0, 0, 1


<ImageMenuScreen>:
    orientation: 'vertical'
    background_color: 1, 1, 1
    Button:
        text: 'Take Photo'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release:
            if app.targetReaderScreen == 'calib':filepath=app.writeDir+'calib_{}.jpg'.format(app.calibNo)
            else:filepath = app.writeDir + 'sample_{}.jpg'.format(app.sampleScreen.ids['colorReader'].spots[0].sampleGrp)
            app.takenPhoto = filepath #is this ever used?
            util.take_photo(filepath)
        background_normal: ''
        color: 0, 0, 0, 1
    Button:
        text: 'Get Stock Image'
        text_size: self.size
        font_size: '30sp'
        halign: 'center'
        valign: 'middle'
        on_release:
            app.screenManager.add(app.screens.stockImage)
        background_normal: ''
        color: 0, 0, 0, 1


<StockImageScreen>:
    background_color: 1, 1, 1
    BoxLayout:
        id: fileChooserScreen
        size: root.size
        orientation: 'vertical'
        FileChooserListView:
            id: fileChooser
            size_hint_y: 0.9
            root: app.stockImageDir
            path: app.stockImageDir
        Button:
            id: selectButton
            size_hint_y: 0.1
            text: 'Load'
            on_release:
                root.selectImage()
            background_normal: ''
            color: 0, 0, 0, 1


<MsgPopup>:
    size_hint: 0.7, 0.4
    title: "Attention"
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 20

        Label:
            id: message_label
            size_hint_y: 0.4
            text: "Label"
        Button:
            text: 'Dismiss'
            size_hint_y: 0.4
            on_press: root.dismiss()
