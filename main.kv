#:import platform kivy.platform
<ColorReaderScreen>:
    Painter:
        id: painter
        x: root.width * 0.2
        y: root.height * 0.15
        width: root.width * 0.8
        height: root.height * 0.85

    BoxLayout:
        x: 0
        y: root.height * 0.15
        width: root.width * 0.2
        height: root.height * 0.85
        orientation: 'vertical'
        Button:
            text: 'Select Area'
            on_release: 
                print app.imageFile
                root.readRectangle(app.imageFile)
        Button:
            text: 'Go to graph'
            on_release: app.goto_graph()

        TextInput:
            id: boxSizeText
            text: '15'
            font_size: self.height * 0.8
        
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: 'Up'
                on_press: painter.startMoveBox(0, 1)
                on_release: painter.stopMoveBox()
            Button:
                text: 'Down'
                on_press: painter.startMoveBox(0, -1)
                on_release: painter.stopMoveBox()
        BoxLayout:
            Button:
                text: 'Left'
                on_press: painter.startMoveBox(-1, 0)
                on_release: painter.stopMoveBox()
            Button:
                text: 'Right'
                on_press: painter.startMoveBox(1, 0)
                on_release: painter.stopMoveBox()

    BoxLayout:
        width: root.width
        y: root.height * 0.1
        height: root.height * 0.05
        ColorReaderToggleButton:
            text: painter.buttonText[0]
            state: 'down'
            on_press: painter.boxNo = 1
        ColorReaderToggleButton:
            text: painter.buttonText[1]
            on_press: painter.boxNo = 2
        ColorReaderToggleButton:
            text: painter.buttonText[2]
            on_press: painter.boxNo = 3
        ColorReaderToggleButton:
            text: painter.buttonText[3]
            on_press: painter.boxNo = 4
        ColorReaderToggleButton:
            text: painter.buttonText[4]
            on_press: painter.boxNo = 5

    BoxLayout:
        width: root.width
        y: root.height * 0.05
        height: root.height * 0.05
        ColorReaderToggleButton:
            text: painter.buttonText[5]
            on_press:
                painter.boxNo = 6
        ColorReaderToggleButton:
            text: painter.buttonText[6]
            on_press: painter.boxNo = 7
        ColorReaderToggleButton:
            text: painter.buttonText[7]
            on_press: painter.boxNo = 8
        ColorReaderToggleButton:
            text: painter.buttonText[8]
            on_press: painter.boxNo = 9
        ColorReaderToggleButton:
            text: painter.buttonText[9]
            on_press: painter.boxNo = 10

    BoxLayout:
        width: root.width
        y: 0
        height: root.height * 0.05
        ColorReaderToggleButton:
            text: painter.buttonText[10]
            on_press: painter.boxNo = 11
        ColorReaderToggleButton:
            text: painter.buttonText[11]
            on_press: painter.boxNo = 12
        ColorReaderToggleButton:
            text: painter.buttonText[12]
            on_press: painter.boxNo = 13
        ColorReaderToggleButton:
            text: painter.buttonText[13]
            on_press: painter.boxNo = 14
        ColorReaderToggleButton:
            text: painter.buttonText[14]
            on_press: painter.boxNo = 15


<GraphScreen>:
    BoxLayout:
        size: root.size
        orientation: 'vertical'
        MyGraph:
            id: graph
        Button:
            id: analyer_btn
            size_hint_y: None
            height: root.height * 0.25
            text: 'Go to analyser'
            on_release: app.goto_analyser() 

<FileChooserScreen>:
    BoxLayout:
        size: root.size
        orientation: 'vertical'
        FileChooserListView:
            id: filechooser
            path: ('/Users/alistairmckelvie/Projects/analyzer' if platform=='mac' else '/mnt/sdcard/DCIM' if platform=='android' else 'D:/Projects/analyser' if platform=='win' else '.')
        Button:
            size_hint_y: 0.1
            text: 'Load'
            on_release: 
                app.goto_color_reader(filechooser.selection[0])
       
 
<ColorReaderToggleButton@ToggleButton>:
    group: 'select'
    allow_no_boxNo: False
    font_size: self.height * 0.35
    halign: 'center'
    markup: True
